<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calendrier Dynamique</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
      text-align: center;
    }

    form {
      margin-bottom: 20px;
    }

    select, input[type="number"], input[type="color"], button {
      padding: 8px;
      margin: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .calendrier {
      border-collapse: collapse;
      margin: 20px auto;
      background-color: #fff;
    }

    .calendrier th, .calendrier td {
      border: 1px solid #333;
      text-align: center;
      padding: 10px;
    }

    /* Tailles */
    .petit td, .petit th { width: 30px; height: 30px; font-size: 12px; }
    .moyen td, .moyen th { width: 50px; height: 50px; font-size: 16px; }
    .grand td, .grand th { width: 70px; height: 70px; font-size: 20px; }

    /* Couleur d'entête par défaut */
    .calendrier th {
      background-color: #4CAF50;
      color: white;
    }

    .weekend {
      background-color: #c8e6c9;
    }
  </style>
</head>
<body>

<h1>Générateur de Calendrier</h1>

<!-- Formulaire pour choisir les paramètres -->
<form id="parametresCalendrier">
  <label>Premier jour du mois :</label>
  <select id="jourDebut" required>
    <option value="1">Lundi</option>
    <option value="2">Mardi</option>
    <option value="3">Mercredi</option>
    <option value="4">Jeudi</option>
    <option value="5">Vendredi</option>
    <option value="6">Samedi</option>
    <option value="7">Dimanche</option>
  </select>

  <label>Mois :</label>
  <select id="mois" required>
    <option value="1">Janvier</option>
    <option value="2">Février</option>
    <option value="3">Mars</option>
    <option value="4">Avril</option>
    <option value="5">Mai</option>
    <option value="6">Juin</option>
    <option value="7">Juillet</option>
    <option value="8">Août</option>
    <option value="9">Septembre</option>
    <option value="10">Octobre</option>
    <option value="11">Novembre</option>
    <option value="12">Décembre</option>
  </select>

  <label>Année :</label>
  <input type="number" id="annee" value="2024" required>

  <label>Taille :</label>
  <select id="taille">
    <option value="petit">Petit</option>
    <option value="moyen" selected>Moyen</option>
    <option value="grand">Grand</option>
  </select>

  <br>

  <label>Couleur de fond :</label>
  <input type="color" id="couleurFond" value="#ffffff">

  <label>Couleur du texte :</label>
  <input type="color" id="couleurTexte" value="#000000">

  <br><br>

  <button type="submit">Générer</button>
</form>

<!-- Zone d'affichage du calendrier -->
<div id="zoneCalendrier"></div>
<button onclick="window.location.href ='../TP9.html'">Retour au TP9</button>
<script>
function calendrier(premierJour, mois, annee, taille = "moyen", couleurFond = "#ffffff", couleurTexte = "#000000") {
    const jours = ["Lu", "Ma", "Me", "Je", "Ve", "Sa", "Di"];
    const nbJoursMois = new Date(annee, mois, 0).getDate(); // Nombre de jours dans le mois

    let html = `<table class="calendrier ${taille}">`;
    html += `<caption><strong>${new Date(annee, mois-1).toLocaleString('fr-FR', { month: 'long', year: 'numeric' })}</strong></caption>`;
    html += "<thead><tr>";

    for (let j of jours) {
        html += `<th>${j}</th>`;
    }
    html += "</tr></thead><tbody><tr>";

    let jourSemaine = premierJour - 1; // Correction car en JS lundi = 0
    for (let i = 0; i < jourSemaine; i++) {
        html += "<td></td>"; // Cases vides avant le 1er
    }

    for (let jour = 1; jour <= nbJoursMois; jour++) {
        let classe = ((jourSemaine % 7) >= 5) ? 'weekend' : '';
        html += `<td class="${classe}" style="background-color:${couleurFond}; color:${couleurTexte};">${jour}</td>`;
        jourSemaine++;
        if (jourSemaine % 7 == 0 && jour !== nbJoursMois) {
            html += "</tr><tr>";
        }
    }

    html += "</tr></tbody></table>";

    document.getElementById("zoneCalendrier").innerHTML = html;
}

// Gestion de l'envoi du formulaire
document.getElementById('parametresCalendrier').addEventListener('submit', function(event) {
  event.preventDefault();

  const premierJour = parseInt(document.getElementById('jourDebut').value);
  const mois = parseInt(document.getElementById('mois').value);
  const annee = parseInt(document.getElementById('annee').value);
  const taille = document.getElementById('taille').value;
  const couleurFond = document.getElementById('couleurFond').value;
  const couleurTexte = document.getElementById('couleurTexte').value;

  calendrier(premierJour, mois, annee, taille, couleurFond, couleurTexte);
});
</script>

</body>
</html>
